@page
@model IndexModel
@using LLiveArenaWeb.Models
@{
    ViewData["Title"] = "Home";
}

@functions {
    private string GetMatchScore(Match match)
    {
        if (match.Squads.Count < 2) return "-";
        
        var homeTeam = match.Squads[0];
        var awayTeam = match.Squads[1];
        
        if (homeTeam.FootballScore != null && awayTeam.FootballScore != null)
        {
            var homeScore = homeTeam.FootballScore.Points ?? 0;
            var awayScore = awayTeam.FootballScore.Points ?? 0;
            return $"{homeScore} - {awayScore}";
        }
        
        return "-";
    }
    
    private string GetMatchStatus(Match match)
    {
        if (match.Status == "LIVE" || match.StreamingStatus == "LIVE")
            return "Live";
        if (match.Status == "COMPLETED")
            return "Completed";
        if (match.StreamingStatus == "COMPLETED")
            return "Replay";
        return "Upcoming";
    }
    
    private string GetStatusClass(Match match)
    {
        if (match.Status == "LIVE" || match.StreamingStatus == "LIVE")
            return "status-live";
        if (match.Status == "COMPLETED")
            return "";
        return "status-hot";
    }
}

<section class="hero">
    <span class="tag">Live now</span>
    <h1>Live Sports Center</h1>
    <p>Watch, follow and track live sports events</p>
</section>

<section class="section">
    <div class="section-header">
        <h2>Top Matches</h2>
        <span class="section-pill">Today</span>
    </div>
    <div class="match-grid">
        @if (Model.TopMatches.Any())
        {
            @foreach (var match in Model.TopMatches)
            {
                <article class="match-card">
                    <div>
                        <h3>@match.Name</h3>
                        <p>
                            @if (!string.IsNullOrEmpty(match.Venue))
                            {
                                <text>@match.Venue</text>
                            }
                            else if (match.MatchTour != null && !string.IsNullOrEmpty(match.MatchTour.Name))
                            {
                                <text>@match.MatchTour.Name</text>
                            }
                            @if (match.Scorecard?.FootballScore?.MatchClock != null)
                            {
                                <text> · @match.Scorecard.FootballScore.MatchClock</text>
                            }
                            else
                            {
                                <text> · @match.StartTime.ToString("HH:mm")</text>
                            }
                        </p>
                        @if (GetMatchScore(match) != "-")
                        {
                            <p style="font-weight: bold; margin-top: 0.5rem;">@GetMatchScore(match)</p>
                        }
                    </div>
                    <span class="status-pill @GetStatusClass(match)">@GetMatchStatus(match)</span>
                </article>
            }
        }
        else
        {
            <article class="match-card">
                <div>
                    <h3>No matches available</h3>
                    <p>Check back later for upcoming matches</p>
                </div>
            </article>
        }
    </div>
</section>

<section class="section">
    <div class="section-header">
        <h2>Latest News</h2>
        <span class="section-pill">Preview</span>
    </div>
    <div class="news-grid">
        <article class="news-card">
            <span class="news-tag">Breaking</span>
            <h3>Championship schedule announced</h3>
            <p>Full fixture list drops with prime-time matchups.</p>
        </article>
        <article class="news-card">
            <span class="news-tag">Analysis</span>
            <h3>Power rankings shake up the standings</h3>
            <p>Top teams surge after a decisive weekend.</p>
        </article>
        <article class="news-card">
            <span class="news-tag">Spotlight</span>
            <h3>Rookie star breaks debut record</h3>
            <p>Early season form hints at a breakout campaign.</p>
        </article>
    </div>
</section>

<section class="home-footer">
    <div>
        <h2>Never miss a moment</h2>
        <p>Stay locked in with live scores, instant alerts, and curated highlights.</p>
    </div>
    <a class="home-footer-button" asp-area="" asp-page="/Live">Explore Live</a>
</section>
